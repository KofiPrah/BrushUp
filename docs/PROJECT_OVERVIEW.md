# Art Critique Project Overview

Art Critique is a web application that provides a platform for artists to share their artwork and receive constructive feedback from the community.

## Architecture

The application follows a client-server architecture:

- **Backend**: Django with Django REST Framework providing a RESTful API
- **Frontend**: React.js single-page application
- **Database**: PostgreSQL for data storage
- **Storage**: AWS S3 for media file storage
- **Authentication**: Django Authentication System with Google OAuth integration

## Key Components

### Server Configuration

The application is configured to run on Replit, which uses a load balancer for SSL termination. This requires the application to run in HTTP-only mode internally while still being accessible over HTTPS externally.

Several scripts and configurations have been developed to support this setup:

- HTTP-only server implementations
- Configuration for Gunicorn to run without SSL
- Environment variable settings to disable SSL redirects

### S3 Storage Integration

The application uses AWS S3 for storing media files, particularly artwork images. The integration is designed to work with S3 buckets that have Block Public Access settings enabled, using bucket policies instead of ACLs for public access control.

Key components of the S3 integration:

- Custom storage backends that work without ACLs
- Bucket policy-based access control
- Diagnostic and repair utilities

## Code Organization

The codebase is organized into several directories:

- **docs/**: Documentation for the project
  - **server_config/**: Server configuration documentation
  - **s3_config/**: S3 configuration documentation
  
- **tests/**: Test files for the project
  - **s3/**: S3 integration tests
  - **http_server/**: HTTP server tests
  - **utils/**: Utility tests
  
- **scripts/**: Utility scripts for the project
  - HTTP server scripts
  - S3 configuration scripts
  - Diagnostic and repair utilities

## Running the Application

The application can be run in several ways:

1. **Using the workflow**:
   - Update the workflow as described in the instructions generated by `scripts/update_workflow.py`

2. **Manually**:
   - Use `./run_http_mode.sh` to run the application in HTTP mode

## Troubleshooting

Common issues and their solutions:

1. **SSL/HTTPS errors**:
   - Make sure the application is running in HTTP-only mode
   - Verify that SSL_ENABLED and SECURE_SSL_REDIRECT are set to false

2. **S3 access issues**:
   - Run `python scripts/diagnose_s3_permissions.py` to identify issues
   - Update the bucket policy with `python scripts/update_bucket_policy.py`
   - Test connectivity with `python tests/s3/test_s3_connection.py`